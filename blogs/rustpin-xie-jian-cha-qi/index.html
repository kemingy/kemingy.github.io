<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <title>
Cyanide - 拼写检查器
</title>

    <link rel="stylesheet" href="https://blog.mapotofu.org/style.css">

    
    <link rel="alternate" type="application/atom+xml" title="RSS"
        href="https://blog.mapotofu.org/atom.xml">
    

    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css"
        integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js"
        integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz"
        crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js"
        integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"
        onload="renderMathInElement(document.body, {delimiters:[
        {left: '$$', right: '$$', display: true},
        {left: '\\[', right: '\\]', display: true},
        {left: '$', right: '$', display: false},
        {left: '\\(', right: '\\)', display: false}]});"></script>
    

    
<meta name="google-site-verification" content="OEmuX--u8eJZ_sTIR-hUG85I8snl3z0En6PspWN-OJQ" />
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🖋</text></svg>">

</head>

<body>
    <div class="container">
        <div class="mobile-navbar">
            <div class="mobile-header">
                <a href="/" class="title">Cyanide</a>
            </div>
            <div class="mobile-navbar-icon icon-out" id="mobile-nav-icon">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>

        <nav class="mobile-menu" id="mobile-menu">
            <ul class="mobile-menu-list">
                
                <li class="mobile-menu-item">
                    <a href="https:&#x2F;&#x2F;blog.mapotofu.org">
                        Home
                    </a>
                </li>
                
                <li class="mobile-menu-item">
                    <a href="https:&#x2F;&#x2F;blog.mapotofu.org&#x2F;categories">
                        Categories
                    </a>
                </li>
                
                <li class="mobile-menu-item">
                    <a href="https:&#x2F;&#x2F;blog.mapotofu.org&#x2F;archive">
                        Archive
                    </a>
                </li>
                
                <li class="mobile-menu-item">
                    <a href="https:&#x2F;&#x2F;blog.mapotofu.org&#x2F;about">
                        About
                    </a>
                </li>
                
                <li class="mobile-menu-item">
                    <a href="https:&#x2F;&#x2F;blog.mapotofu.org&#x2F;projects">
                        Projects
                    </a>
                </li>
                
            </ul>
        </nav>

        <header>
            <div class="title">
                <a href="https:&#x2F;&#x2F;blog.mapotofu.org">Cyanide</a>
            </div>
            <nav class="menu">
                <ul>
                    
                    <li>
                        <a href="https:&#x2F;&#x2F;blog.mapotofu.org">
                            Home
                        </a>
                    </li>
                    
                    <li>
                        <a href="https:&#x2F;&#x2F;blog.mapotofu.org&#x2F;categories">
                            Categories
                        </a>
                    </li>
                    
                    <li>
                        <a href="https:&#x2F;&#x2F;blog.mapotofu.org&#x2F;archive">
                            Archive
                        </a>
                    </li>
                    
                    <li>
                        <a href="https:&#x2F;&#x2F;blog.mapotofu.org&#x2F;about">
                            About
                        </a>
                    </li>
                    
                    <li>
                        <a href="https:&#x2F;&#x2F;blog.mapotofu.org&#x2F;projects">
                            Projects
                        </a>
                    </li>
                    
                </ul>
            </nav>
        </header>

        <hr class="gradient">

        <main>
            <div class="content">
                


<article class="post">
    <div class="post-title">
        <a href="https:&#x2F;&#x2F;blog.mapotofu.org&#x2F;blogs&#x2F;rustpin-xie-jian-cha-qi&#x2F;">拼写检查器</a>
    </div>
    <div class="post-meta">
        <span class="post-time">
            📅 2018-06-17
        </span>
        <span class="post-reading-time">
            ⌛ 6 min
        </span>
        
        <div class="post-category">
            
            <a href="https://blog.mapotofu.org/categories/technology/">
                Technology
            </a>
            
            <a href="https://blog.mapotofu.org/categories/programming-language/">
                Programming Language
            </a>
            
            <a href="https://blog.mapotofu.org/categories/rust/">
                Rust
            </a>
            
        </div>
        
    </div>
    <div class="post-content">
        <p>跟拼写检查器还是有点渊源的。想当初做数学建模的时候，就遇到过一次类似的问题，于是去网上搜到 <a href="http://norvig.com/spell-correct.html">Peter Norvig</a> 的教程，写的非常好，当时看到短短二十行代码就能很好解决这个问题，实在是惊艳。而我也是从那个时候开始学习 Python 的。当然，以我初学者的水平要想一时间完全看懂他的代码是不太可能的，不过还是能理解大体的流程，做了一定修改后留作自用。</p>
<span id="continue-reading"></span>
<p>到现在大概过去三年了，重新遇到了 query rewriting 问题，虽然这次并不需要用到这段代码了，不过作为一个例子来练手 Rust 也是不错的，毕竟看了好久的 Rust 文章和代码，抄过一些引擎，感受过语法的复杂却没自己写过，实在是不应该。</p>
<p>一开始的思路很简单，直接对照着 Python 版本做翻译就好了。好久没有接触静态语言了，每个变量都要考虑类型问题，指针更需要认真对待，而且 Rust 里面还有生命周期的问题，每个变量什么时候生成，能存活到什么时候都要心里有数。这一点一开始没觉得又什么，天真地以为能一眼看出来，应该很容易 debug。但是当遇到借用检查器的问题时，就真的一脸懵逼了，好好的一个 <code>closure</code> 里面怎么就有一个变量活得不够长呢？</p>
<p>一开始要适应 Rust 真的非常痛苦了，跟当初刚学编程接触 C 语言有一拼，不过也有很多不一样的地方：</p>
<ol>
<li>C 的资料非常多，当然也不乏各种小白瞎写的和各种复制粘贴的，Rust 资料就少得多了，基本都是文档和社区的，还有一些 StackOverflow 和 Reddit 上面的，总之资料很有限，而且不一定有对应的问题。</li>
<li>C 虽然发展了很多年了，但是初学者接触的各种函数接口基本都固定了，而 Rust 到现在还发展地很激进，可能你查到的写法已经不能用了，而且有时候对应的文档还没有更新，这时候你又偏偏用 nightly 版本，那么很不幸，你只能靠插件的提示自己解决问题了。</li>
<li>Rust 还很新，虽然它的报错提示做得很好且一直在改进，但是难免有很多提示都不够准确，让人摸不着头脑。</li>
<li>Rust 相关的生态还不够完善，甚至是一些基本的东西也可能不完善，我用到的一个 <code>max_by_key</code> 居然还不支持 <code>float</code> 型，只好该用 <code>cmp</code> 了。</li>
<li>Rust 社区还是非常活跃的，只不过中文社区基本废弃了，虽然使用英文对开发者是基本要求了，不过还是希望能有中文的活跃社区帮助更多的人来学习这门语言。（说起来我为了写好英文版的提问，自己看了几遍问题就自己想出来，真的是很尴尬）</li>
</ol>
<p>中间最崩溃的确实还是借用检查器的问题，怪不得 Lo 姐会说这个把她搞得不想碰 Rust 了。当然也有报错信息不到位的问题，不过新手确实很容易卡在这里，而且很可能查到的资料都没法给出正确的提示。我自己也一度怀疑人生了，然后去搜了几个现成的 Rust 版拼写检查器，发现别人写法非常老实，各种 <code>if</code> 和 <code>for</code> 就没有什么问题，而我非要用什么 <code>iter</code> ，<code>match</code>，<code>collect</code> 之类的写法，接连碰壁。不过最后能成功写出来，确实感觉学到了不少东西，也对 Rust 理解更深了，还是值得的。（虽然我差不多花了一天的时间写了一个可能用 Python 十几分钟就能实现的功能）</p>
<p>磕磕绊绊，还是把<a href="https://github.com/Momingcoder/spelling_corrector">代码</a>写完了，真的是好久都没有这种体验了，过程虽然痛苦但是结果还是很幸福，追求技术的幸福。</p>
<p>总的来说，Rust 还是一门非常优秀的语言，现在新出的 deno 好像也要大规模使用 Rust 了，我觉的自己的选择还是没错的，虽然现在基本上看不到有人招 Rust 的，这不影响。自己喜欢就好，可以自己拿来做一些合适的项目，然后开源出去。</p>

    </div>

    <div class="post-before-footer">
        
<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License"
        style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" /></a><br />This work is
licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons
    Attribution-NonCommercial-ShareAlike 4.0 International License</a>.

    </div>

    <div class="post-footer">
        
            
            <div class="post-nav">
                
                <a class="previous" href="https:&#x2F;&#x2F;blog.mapotofu.org&#x2F;blogs&#x2F;relevance-from-tfidf-to-bm25&#x2F;">‹ Relevance: from TFIDF to BM25</a>
                
                
                <a class="next" href="https:&#x2F;&#x2F;blog.mapotofu.org&#x2F;blogs&#x2F;pin-yin-shu-ru-fa-yin-qing&#x2F;">拼音输入法引擎 ›</a>
                
                
                
            </div>
            
        
    </div>
</article>

            </div>
        </main>

        
        
    </div>

    
    <script src="https://blog.mapotofu.org/script.js"></script>
    
</body>

</html>